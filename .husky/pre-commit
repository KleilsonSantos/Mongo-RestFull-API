#!/bin/sh
echo ""
cd "$(git rev-parse --show-toplevel)"

echo ""
echo "Branch: $(git branch --show-current)"

echo "Staged files:"
git diff --cached --name-only

echo ""
echo "ğŸ¶ Husky: executando hook de pre-commit..."

echo ""
echo "ğŸ§ª Executando testes..."
npm run test

echo ""
echo "ğŸ” Corrigindo problemas de lint automaticamente..."
npm run lint

echo ""
echo "ğŸ¨ Formatando o cÃ³digo com Prettier (ou equivalente)..."
npm run format

echo ""
echo "ğŸ”  Verificando se hÃ¡ alteraÃ§Ãµes no arquivo package.json..."
tsx src/utils/package-sonar-sync.ts
echo "âœ… Arquivo package.json atualizado com sucesso."


echo "âœ… Tudo pronto! Finalizando pre-commit hook com sucesso."
echo "ğŸš€ Commit em andamento..."